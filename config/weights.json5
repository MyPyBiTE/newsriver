{
  // weights.json5 — server-side scoring knobs
  // Version: v0.6.1 (adds MLB finals & Nate hint keys used by fetch_headlines.py)
  timezone: "America/Toronto",

  // -------- Recency & decay --------
  recency: {
    half_life_hours: 6,
    max_age_hours: 72,
    age_penalty_after_24h: -0.6,
    age_penalty_after_36h: -0.4,
    superseded_cluster_penalty: -0.9
  },

  // Category-specific decay tweaks (sports uses global)
  recency_overrides: {
    categories: {
      "Culture": { half_life_hours: 4, max_age_hours: 48 },
      "Youth":   { half_life_hours: 4, max_age_hours: 48 }
    }
  },

  // -------- Reordering stability (UI aids; safe to keep) --------
  reorder: {
    protect_top_n: 8,
    min_reorder_delta: 1.25,
    grace_period_minutes: 3,
    rank_drift_tolerance: 0.5,

    // NEW: slight freshness nudge for Nate Silver contributor page scrape
    nate_hours_hint_bonus: 0.25,
    nate_hours_hint_max_hours: 6
  },

  // -------- Regional bias --------
  regional: {
    weights: {
      country_match: 1.2,
      province_match: 0.8,
      city_match: 0.6,
      adjacent_province: 0.3
    },
    max_bonus: 2.4
  },

  // -------- Category nudges --------
  categories: {
    "Public Safety": 0.9,
    "Weather": 0.6,
    "Transit": 0.4,
    "Local": 0.5,
    "Business": 0.2,
    "Energy": 0.2,
    "Real Estate": 0.15,
    "Tech": 0.15,
    "Culture": 0.25,
    "Youth": 0.25,
    "Sports": 0.35,   // slight baseline bump so Sports isn't drowned by Business
    "General": 0.0
  },

  // -------- Public-safety severity --------
  public_safety: {
    has_fatality_points: 1.0,
    per_death_points: 0.12,
    max_death_points: 2.0,
    per_injured_points: 0.03,
    max_injury_points: 0.6,
    violent_keywords_bonus: 0.2,
    violent_keywords: [
      "shooting","shot","stabbing","stabbed","homicide","murder",
      "manslaughter","fatal crash","deadly crash","collision","mass casualty",
      "kidnapping","amber alert","hostage","gunfire","mass shooting",
      "assault","carjacking","drive-by","bomb threat","arson"
    ]
  },

  // -------- Markets --------
  markets: {
    btc_abs_move_threshold_pct: 7.0,
    btc_points: 1.6,
    index_abs_move_threshold_pct: 1.0,
    index_points: 1.0,
    nikkei_abs_move_threshold_pct: 1.0,
    nikkei_points: 0.7,
    single_stock_abs_move_threshold_pct: 10.0,
    single_stock_points: 1.2,
    time_windows: {
      markets_open: { start: "09:30", end: "16:00", points: 0.6 },
      asia_window:  { start: "01:20", end: "03:30", points: 0.5 }
    }
  },

  // -------- Entertainment (kept as-is; doesn’t affect Jays) --------
  entertainment: {
    release_keywords: [
      "premiere","trailer","season","finale","episode","cast","casting",
      "box office","album","single","ep","tracklist","tour","concert",
      "festival","red carpet","press junket","teaser","first look","review",
      "renewed","canceled","soundtrack","chart","debut"
    ],
    keyword_points_per_match: 0.35,
    keyword_points_cap: 0.8,
    trade_entity_bonus: 0.3,
    trade_entity_cap: 0.6,
    trade_domains: [
      "variety.com","hollywoodreporter.com","deadline.com","thewrap.com",
      "rollingstone.com","people.com","billboard.com","ew.com","worldofreel.com",
      "showbiz411.com","tmz.com"
    ],
    time_windows: [
      { key: "evening_pop", start: "18:30", end: "00:30", points: 0.5 },
      { key: "weekend_pop", days: ["Fri","Sat","Sun"], start: "11:00", end: "23:00", points: 0.4 },
      { key: "music_release", days: ["Thu","Fri","Sat"], start: "20:00", end: "14:00", points: 0.4 },
      { key: "box_office", days: ["Sun","Mon"], start: "09:00", end: "12:00", points: 0.4 }
    ]
  },

  // -------- SPORTS (keys used by your Python) --------
  sports: {
    // Jays-centric knobs (you had these already)
    team_match_points:        1.00, // “Blue Jays”, “Toronto Blue Jays”, “Jays”
    player_match_points:      0.50, // Guerrero, Bichette, Kirk, Bassitt, Gausman, Lauer, Yesavage
    result_win_points:        0.70, // “beat”, “shut out”, “walk-off”, “clinch”, “sweep”, etc.
    result_loss_points:       0.40, // “lose to”, “fall to”, “drop”, “blown save”, etc.
    evening_window_points:    0.90, // stacks 18:30–22:30 ET (your code’s window)
    playoff_mode_points:      0.60, // stacks when MPB_PLAYOFFS=1 and a result is detected

    // NEW: MLB focus teams & finals (Red Sox, Yankees, Mariners, Dodgers, Phillies + Jays)
    // These power the new regexes & scoring in fetch_headlines.py so finals/recaps float.
    focus_team_points:        0.55, // any focus team mentioned (non-Jays get this too)
    final_story_points:       0.75, // headline says Final/Postgame/Recap OR looks like a game-final
    final_with_score_points:  0.45  // contains an explicit scoreline like “4-3”
  },

  // -------- Google Trends assist (optional) --------
  trends: {
    enabled: true,
    provider: "google_trends",
    geo: "CA",
    top_n: 30,
    fields_to_match: ["title","summary"],
    match_bonus_min: 0.2,
    match_bonus_max: 1.0,
    half_life_hours: 12,
    ttl_hours: 24,
    cap_total_points: 1.2
  },

  // -------- Sources handling --------
  sources: {
    aggregator_penalty: -0.6,
    press_wire_penalty: -0.5,
    preferred_domains_bonus: 0.25
    // Note: specific preferred domains are defined in Python (PREFERRED_DOMAINS).
  },

  // -------- Dedupe knobs (UI feel) --------
  dedupe: {
    jaccard_threshold: 0.82,       // keep your Python default behavior consistent
    newer_bias_points: 0.3,
    non_aggregator_bias_points: 0.3
  },

  // -------- Display effects thresholds --------
  effects: {
    lightsaber_min_score: 2.5,
    lightsaber_also_if: {
      body_count_ge: 5,
      btc_abs_move_ge_pct: 8.0,
      single_stock_abs_move_ge_pct: 15.0
    },
    glitch_min_score: 1.8
  },

  // -------- Developing stories (optional UI) --------
  developing: {
    max_manual_slots: 3,
    pin_bonus_points: 2.0,
    unpin_decay_minutes: 180
  }
}
